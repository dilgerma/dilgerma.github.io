<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title }} - {% endif %}{{ site.title }}</title>

    <!-- Meta Description -->
    <meta name="description" content="{% if page.description %}{{ page.description }}{% elsif page.subtitle %}{{ page.subtitle }}{% else %}{{ site.description }}{% endif %}">

    <!-- Keywords -->
    {% if page.keywords %}
    <meta name="keywords" content="{{ page.keywords }}">
    {% endif %}

    <!-- Author -->
    <meta name="author" content="{% if page.author %}{{ page.author }}{% else %}Martin Dilger{% endif %}">

    <!-- Canonical URL -->
    <link rel="canonical" href="{{ site.url }}{{ page.url }}">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="{% if page.layout == 'docs' and page.url contains '/blog/' %}article{% else %}website{% endif %}">
    <meta property="og:url" content="{{ site.url }}{{ page.url }}">
    <meta property="og:title" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}">
    <meta property="og:description" content="{% if page.description %}{{ page.description }}{% elsif page.subtitle %}{{ page.subtitle }}{% else %}{{ site.description }}{% endif %}">
    {% if page.featured_image %}
    <meta property="og:image" content="{{ site.url }}{{ page.featured_image | relative_url }}">
    {% endif %}
    <meta property="og:site_name" content="{{ site.title }}">
    <meta property="og:locale" content="en_US">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="{{ site.url }}{{ page.url }}">
    <meta name="twitter:title" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}">
    <meta name="twitter:description" content="{% if page.description %}{{ page.description }}{% elsif page.subtitle %}{{ page.subtitle }}{% else %}{{ site.description }}{% endif %}">
    {% if page.featured_image %}
    <meta name="twitter:image" content="{{ site.url }}{{ page.featured_image | relative_url }}">
    {% endif %}

    <!-- Article specific meta -->
    {% if page.layout == 'docs' and page.url contains '/blog/' %}
    <meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}">
    {% if page.modified_date %}
    <meta property="article:modified_time" content="{{ page.modified_date | date_to_xmlschema }}">
    {% endif %}
    <meta property="article:author" content="{% if page.author %}{{ page.author }}{% else %}Martin Dilger{% endif %}">
    {% if page.category %}
    <meta property="article:section" content="{{ page.category }}">
    {% endif %}
    {% if page.tags %}
    {% for tag in page.tags %}
    <meta property="article:tag" content="{{ tag }}">
    {% endfor %}
    {% endif %}
    {% endif %}

    <!-- Structured Data - JSON-LD -->
    {% if page.layout == 'docs' and page.url contains '/blog/' %}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BlogPosting",
      "headline": "{{ page.title }}",
      "description": "{% if page.description %}{{ page.description }}{% elsif page.subtitle %}{{ page.subtitle }}{% else %}{{ page.title }}{% endif %}",
      "image": {% if page.featured_image %}"{{ site.url }}{{ page.featured_image | relative_url }}"{% else %}""{% endif %},
      "author": {
        "@type": "Person",
        "name": "{% if page.author %}{{ page.author }}{% else %}Martin Dilger{% endif %}",
        "url": "{{ site.url }}"
      },
      "publisher": {
        "@type": "Organization",
        "name": "{{ site.title }}",
        "logo": {
          "@type": "ImageObject",
          "url": "{{ site.url }}/assets/images/logo.png"
        }
      },
      "datePublished": "{{ page.date | date_to_xmlschema }}",
      {% if page.modified_date %}
      "dateModified": "{{ page.modified_date | date_to_xmlschema }}",
      {% else %}
      "dateModified": "{{ page.date | date_to_xmlschema }}",
      {% endif %}
      "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "{{ site.url }}{{ page.url }}"
      }
    }
    </script>

    <!-- Breadcrumb Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "{{ site.url }}"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Blog",
          "item": "{{ site.url }}/docs/blog/"
        },
        {
          "@type": "ListItem",
          "position": 3,
          "name": "{{ page.title }}",
          "item": "{{ site.url }}{{ page.url }}"
        }
      ]
    }
    </script>
    {% endif %}

    <link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">

    <!-- Performance Optimization: Preconnect to external domains -->
    <link rel="preconnect" href="https://nebulit-gmbh.kit.com">
    <link rel="dns-prefetch" href="https://nebulit-gmbh.kit.com">
</head>
<body>
    {% include header.html %}

    <div class="doc-layout">
        {% include navigation.html %}

        <div class="content-wrapper">
            <main class="doc-content">
                {{ content }}
            </main>

            <footer class="footer">
                <div class="footer-content">
                    <p>&copy; 2026 {{ site.title }}</p>
                    <nav class="footer-nav">
                        <a href="{{ '/impressum' | relative_url }}">Impressum</a>
                        <a href="{{ '/datenschutz' | relative_url }}">Datenschutz</a>
                    </nav>
                </div>
            </footer>
        </div>
    </div>
</body>
</html>